<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
  <meta name="theme-color" content="#141414">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="apple-mobile-web-app-title" content="ClaudePod">
  <title>ClaudePod</title>
  <link rel="manifest" href="/manifest.json">
  <link rel="apple-touch-icon" href="/icons/icon-192.png">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/xterm@5.3.0/css/xterm.css">
  <link rel="stylesheet" href="/style.css">
</head>
<body>
  <div id="app">
    <!-- Offline banner -->
    <div id="offline-banner" class="offline-banner" role="alert">
      You're offline. Some features may be unavailable.
    </div>

    <!-- Header -->
    <header class="header">
      <div class="header-left">
        <span class="logo">ClaudePod</span>
        <span id="connection-status" class="connection-status" title="Disconnected">
          <span class="status-dot"></span>
        </span>
      </div>
      <div class="header-right">
        <div class="font-controls">
          <button id="font-decrease" class="font-btn" aria-label="Decrease font size">A-</button>
          <button id="font-increase" class="font-btn" aria-label="Increase font size">A+</button>
        </div>
        <select id="session-select" class="session-select" aria-label="Select session">
          <option value="">No sessions</option>
        </select>
        <button id="install-btn" class="btn btn-ghost" style="display: none;" aria-label="Install app">Install</button>
        <button id="new-session-btn" class="btn btn-primary" aria-label="Create new session">+ New</button>
      </div>
    </header>

    <!-- Terminal container -->
    <main class="terminal-container">
      <div id="terminal"></div>
      <div id="status" class="status" role="status" aria-live="polite"></div>

      <!-- Scroll controls -->
      <div class="scroll-controls">
        <button id="scroll-top" class="scroll-btn" aria-label="Scroll to top">↑</button>
        <button id="scroll-bottom" class="scroll-btn" aria-label="Scroll to bottom">↓</button>
      </div>
    </main>

    <!-- Text input composer -->
    <div class="input-bar">
      <textarea
        id="input-composer"
        placeholder="Type a message..."
        rows="1"
        autocomplete="off"
        autocorrect="on"
        autocapitalize="sentences"
        spellcheck="true"
        enterkeyhint="send"
      ></textarea>
      <button id="send-btn" class="btn btn-primary" aria-label="Send">
        <span class="send-icon">↑</span>
      </button>
    </div>

    <!-- Quick action buttons - mobile shows only 4 essential buttons -->
    <footer class="quick-actions">
      <button id="palette-btn" class="action-btn" aria-label="Menu">⋯</button>
      <button class="action-btn" data-input="y" aria-label="Send Y">Y</button>
      <button class="action-btn" data-input="n" aria-label="Send N">N</button>
      <button class="action-btn" data-key="Enter" aria-label="Send Enter">↵</button>
      <button class="action-btn mobile-hide" data-key="Escape" aria-label="Send Escape">Esc</button>
      <button class="action-btn mobile-hide" data-input="&#x03;" aria-label="Send Ctrl+C">^C</button>
      <button id="kill-session-btn" class="action-btn mobile-hide danger" aria-label="End session">End</button>
    </footer>

    <!-- Kill confirmation modal -->
    <div id="kill-modal" class="modal-overlay" role="dialog" aria-modal="true" aria-labelledby="kill-modal-title">
      <div class="modal">
        <h2 id="kill-modal-title" class="modal-title">End Session?</h2>
        <p class="modal-message">This will terminate the Claude session <strong id="kill-session-name"></strong>. Any unsaved work will be lost.</p>
        <div class="modal-actions">
          <button id="modal-cancel" class="btn btn-ghost">Cancel</button>
          <button id="modal-confirm" class="btn btn-danger">End Session</button>
        </div>
      </div>
    </div>

    <!-- Directory browser modal -->
    <div id="dir-modal" class="modal-overlay" role="dialog" aria-modal="true" aria-labelledby="dir-modal-title">
      <div class="modal modal-lg">
        <h2 id="dir-modal-title" class="modal-title">New Session</h2>
        <p class="modal-subtitle">Select a project directory</p>

        <div class="dir-browser">
          <div class="dir-nav">
            <button id="dir-up" class="btn btn-ghost dir-up-btn" aria-label="Go up one level">↑ Up</button>
            <div class="dir-path" id="dir-current-path">/</div>
          </div>
          <div id="dir-recent" class="dir-recent"></div>
          <div class="dir-list" id="dir-list">
            <div class="dir-loading">Loading...</div>
          </div>
        </div>

        <div class="dir-options">
          <label class="toggle-label">
            <input type="checkbox" id="skip-permissions-toggle">
            <span class="toggle-text">Skip permissions (--dangerously-skip-permissions)</span>
          </label>
        </div>

        <div class="modal-actions">
          <button id="dir-cancel" class="btn btn-ghost">Cancel</button>
          <button id="dir-select" class="btn btn-primary">Start Here</button>
        </div>
      </div>
    </div>

    <!-- Command palette modal -->
    <div id="palette-modal" class="modal-overlay" role="dialog" aria-modal="true" aria-labelledby="palette-modal-title">
      <div class="modal palette-modal">
        <h2 id="palette-modal-title" class="sr-only">Command Palette</h2>
        <div class="palette-search">
          <input
            type="text"
            id="palette-search"
            placeholder="Search commands..."
            autocomplete="off"
            autocorrect="off"
            autocapitalize="none"
            spellcheck="false"
            enterkeyhint="search"
          >
        </div>
        <div class="palette-list" id="palette-list"></div>
      </div>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/xterm@5.3.0/lib/xterm.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/xterm-addon-fit@0.8.0/lib/xterm-addon-fit.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/xterm-addon-web-links@0.9.0/lib/xterm-addon-web-links.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/xterm-addon-search@0.13.0/lib/xterm-addon-search.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/hammerjs@2.0.8/hammer.min.js"></script>
  <script src="/app.js"></script>
</body>
</html>
